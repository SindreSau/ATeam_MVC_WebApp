@model ATeam_MVC_WebApp.ViewModels.FoodProductListViewModel
@using Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewData["Title"] = "All Food Products";
    Layout = "_Layout";
}

<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>All Food Products</h1>
        <a asp-action="CreateCategory" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> Create New Category
        </a>
    </div>

    <div class="row g-4">
        @foreach (var foodProduct in Model.FoodProducts)
        {
            <div class="col-12 col-md-6 col-lg-4">
                <partial name="_FoodProductCardAdmin" model="foodProduct" />
            </div>
        }
    </div>

    <!-- Pagination control row -->
    <div class="d-flex justify-content-between align-items-center mt-4">
        <!-- Items per page dropdown -->
        <div class="d-flex align-items-center gap-2">
            <label for="pageSize" class="form-label mb-0">Items per page:</label>
            <form asp-action="Index" method="get" class="d-flex align-items-center">
                <input type="hidden" name="pageNumber" value="1" />
                <input type="hidden" name="orderBy" value="@Model.OrderBy" />
                @if (Model.Nokkelhull.HasValue)
                {
                    <input type="hidden" name="nokkelhull" value="@Model.Nokkelhull.Value.ToString().ToLower()" />
                }
                <select id="pageSize" name="pageSize" class="form-select form-select-sm" style="width: auto;"
                    onchange="this.form.submit()">
                    @foreach (var size in new[] { 1, 2, 10, 25 })
                    {
                        <option value="@size" selected="@(Model.Pagination.PageSize == size)">@size</option>
                    }
                </select>
            </form>
        </div>

        <!-- Pagination -->
        <div>
            <partial name="_PaginationPartial" model="@Model.Pagination" />
        </div>

        <!-- Total items display -->
        <div class="text-muted">
            Total items: @Model.Pagination.TotalCount
        </div>
    </div>
</div>